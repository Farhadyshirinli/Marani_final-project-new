@model ContactPost

@{
    ViewData["Title"] = "Contact";
}

<!-- Header Section Begin -->
<header class="header-section">
    <div class="container-fluid">
        <div class="inner-header">
            <div class="logo">
                <a href="./index.html"><img src="~/assets/img/logo.png" alt=""></a>
            </div>
            <div class="header-right">
                <img src="~/assets/img/icons/search.png" alt="" class="search-trigger">
                <img src="~/assets/img/icons/man.png" alt="">
                <a href="#">
                    <img src="~/assets/img/icons/bag.png" alt="">
                    <span>2</span>
                </a>
            </div>
            <div class="user-access">
                <a href="#">Register</a>
                <a href="#" class="in">Sign in</a>
            </div>

            <partial name="_MainMenu" />

        </div>
    </div>
</header>

<!-- Header End -->
<!-- Page Add Section Begin -->
<section class="page-add">
    <div class="container">
        <div class="row">
            <div class="col-lg-4">
                <div class="page-breadcrumb">
                    <h2>Contact us<span>.</span></h2>
                </div>
            </div>

        </div>
    </div>
</section>
<!-- Page Add Section End -->
<!-- Contact Section Begin -->
<div class="contact-section">
    <div class="container">
        <div class="row">
            <div class="col-lg-8">
                <form id="contact-form" class="contact-form" method="post" novalidate>
                    @if (@ViewBag.Message != null)
                    {
                        <div class="alert-success">
                            @ViewBag.Message
                        </div>
                    }
                    <div class="row">
                        <div class="col-lg-6">
                            <input asp-for="Name" placeholder="First Name" />
                            <span asp-validation-for="Name" class="alert-danger"></span>
                        </div>
                        <div class="col-lg-6">
                            <input asp-for="Surname" -for placeholder="Surname">
                            <span asp-validation-for="Surname" class="alert-danger"></span>

                        </div>
                        <div class="col-lg-12">
                            <input asp-for="Email" type="Email" placeholder="E-mail" />
                            <span asp-validation-for="Email" class="alert-danger"></span>
                        </div>
                        <div class="col-lg-12">
                            <input asp-for="Subject" placeholder="Subject">
                            <span asp-validation-for="Subject" class="alert-danger"></span>
                        </div>
                        <div class="col-lg-12">
                            <textarea asp-for="Message" placeholder="Message"></textarea>
                            <span asp-validation-for="Message" class="alert-danger"></span>
                        </div>

                        <div class="col-lg-12 text-right">
                            <button type="submit">Send message</button>
                        </div>
                    </div>
                </form>
            </div>
            <div class="col-lg-3 offset-lg-1">
                <div class="contact-widget">
                    <div class="cw-item">
                        <h5>Location</h5>
                        <ul>
                            <li>1525 Awesome Lane, </li>
                            <li>Los Angeles, CA</li>
                        </ul>
                    </div>
                    <div class="cw-item">
                        <h5>Phone</h5>
                        <ul>
                            <li>+1 (603)535-4592</li>
                            <li>+1 (603)535-4556</li>
                        </ul>
                    </div>
                    <div class="cw-item">
                        <h5>E-mail</h5>
                        <ul>
                            <li>contact@violetstore.com</li>
                            <li>www.violetstore.com</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="map">
            <div class="row">
                <div class="col-lg-12">
                    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d26440.72384129847!2d-118.24906619231132!3d34.06719475913053!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x80c2c659f50c318d%3A0xe2ffb80a9d3820ae!2sChinatown%2C%20Los%20Angeles%2C%20CA%2C%20USA!5e0!3m2!1sen!2sbd!4v1570213740685!5m2!1sen!2sbd"
                            height="560" style="border:0;" allowfullscreen=""></iframe>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Contact Section End -->
<!-- Footer Section Begin -->
<footer class="footer-section spad">
    <div class="container">
        <div class="newslatter-form">
            <div class="row">
                <div class="col-lg-12">
                    <form action="#">
                        <input type="text" placeholder="Your email address">
                        <button type="submit">Subscribe to our newsletter</button>
                    </form>
                </div>
            </div>
        </div>
        <partial name="_FooterWidget" />

    </div>
    <div class="social-links-warp">
        <div class="container">
            <div class="social-links">
                <a href="" class="instagram"><i class="fa fa-instagram"></i><span>instagram</span></a>
                <a href="" class="pinterest"><i class="fa fa-pinterest"></i><span>pinterest</span></a>
                <a href="" class="facebook"><i class="fa fa-facebook"></i><span>facebook</span></a>
                <a href="" class="twitter"><i class="fa fa-twitter"></i><span>twitter</span></a>
                <a href="" class="youtube"><i class="fa fa-youtube"></i><span>youtube</span></a>
                <a href="" class="tumblr"><i class="fa fa-tumblr-square"></i><span>tumblr</span></a>
            </div>
        </div>

        <div class="container text-center pt-5">
            <p>
                <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="icon-heart color-danger" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank">Colorlib</a>
                <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
            </p>
        </div>
    </div>
</footer>
<!-- Footer Section End -->
@section addcss{
    <link rel="stylesheet" href="~/libs/toastr.js/toastr.min.css" />
    <style>
        input[name].novalidate
        textarea[name].novalidate,
        {
            border: 1px solid rgb(220,53,69);
        }

    </style>
                }

    @section addjs{
    <script src="~/libs/toastr.js/toastr.min.js"></script>
    <script src="~/libs/toastr.js/toastr.customize.js"></script>



    <script>
        $(document).ready(function () {
            $('#contact-form').submit(function (ev) {
                ev.preventDefault();
                console.log(ev.currentTarget)

                let fd = new FormData(ev.currentTarget);

                $.ajax({
                    url: '@Url.Action("Contact")',
                    type: 'POST',
                    data: fd,
                    processData: false,
                    contentType: false,
                    success: function (response) {

                        $('#contact-form span.alert-danger').remove();
                        $('#contact-form input[name],#contact-form textarea[name]').removeClass('novalidated');
                        console.log(response, 'SUCCESS');

                        if (response.error == true) {
                            toastr.error(response.message, 'Xeta');
                            showErrors(response.state)
                            return;
                        }

                        toastr.success(response.message, 'Ugur');
                        ev.currentTarget.reset();
                    },


                    error: function (errorRespnonse) {
                        console.log(errorResponse, 'ERROR');
                    }


                });

            })

        });


        function showErrors(state) {
            let form = $('#contact-form');

            state.forEach(item => {

                let errorInput = $(`#contact-form input[name=${item.fieldName}],#contact-form textarea[name=${item.fieldName}]`);
                let errorSpan = $('<span/>', {
                    class: 'alert-danger',
                    html: item.message
                });

                $(errorInput.parent()).append(errorSpan);
                $(errorInput).addClass('novalidated');

            });


        };

    </script>
}





